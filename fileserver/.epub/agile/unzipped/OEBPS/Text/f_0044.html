<?xml version="1.0" encoding="utf-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN"
  "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <title>Agile Web Development with Rails</title>
  <link href="../Styles/bookshelf.css" rel="stylesheet" type="text/css" />
  <link href="../Styles/book_local.css" rel="stylesheet" type="text/css" />
  <link href="../Styles/page-template.xpgt" rel="stylesheet" type="application/vnd.adobe-page-template+xml" />
  <meta content="rails4" name="bookcode" />
  <style type="text/css">
/*<![CDATA[*/

  code.sgc-1 {white-space: pre-wrap;}
  /*]]>*/
  </style>
</head>

<body>
  <h2 id="heading_id_2">6.1 Iteration A1: Creating the Products Maintenance Application</h2>

  <p id="N11D06">At the heart of the Depot application is a database. Getting this installed and configured and tested before proceeding further will prevent a lot of headaches. If you aren’t sure of what you want, go with the defaults, and it will go easy. If you already know what you want, Rails makes it easy for you to describe your configuration.</p>

  <h3 id="sect.create.application">Creating a Rails Application</h3>

  <p id="N11D15">Back <a href="../Text/f_0022.html#create.new.rails.app">​here​</a>, we saw how to create a new Rails application. We’ll do the same thing here. Go to a command prompt, and type <code class="cf commandname">rails new</code> followed by the name of our project. In this case, our project is called <code class="cf commandname">depot</code>, so make sure you are not inside an existing application directory and type this:</p>

  <table class="processedcode">
    <tr>
      <td class="codeprefix">&nbsp;</td>

      <td class="codeline"><code class="sgc-1">work&gt; <strong class="prompt">rails new depot</strong></code></td>
    </tr>
  </table>

  <p id="N11D35">We see a bunch of output scroll by. When it has finished, we find that a new directory, <code class="cf dir">depot</code>, has been created. That’s where we’ll be doing our work.</p>

  <table class="processedcode">
    <tr>
      <td class="codeprefix">&nbsp;</td>

      <td class="codeline"><code class="sgc-1">work&gt; <strong class="prompt">cd depot</strong></code></td>
    </tr>

    <tr>
      <td class="codeprefix">&nbsp;</td>

      <td class="codeline"><code class="sgc-1">depot&gt; <strong class="prompt">ls -p</strong></code></td>
    </tr>

    <tr>
      <td class="codeprefix">&nbsp;</td>

      <td class="codeline"><code class="sgc-1">app/ config.ru doc/ Gemfile.lock log/ Rakefile script/ tmp/</code></td>
    </tr>

    <tr>
      <td class="codeprefix">&nbsp;</td>

      <td class="codeline"><code class="sgc-1">config/ db/ Gemfile lib/ public/ README test/ vendor/</code></td>
    </tr>
  </table>

  <h3 id="sec.three.databases">Creating the Database</h3>

  <p id="N11D5A">For this application, we’ll use the open source SQLite database (which you’ll need if you’re following along with the code). We’re using SQLite version&nbsp;3 here.</p>

  <p id="N11D5D">SQLite 3 is the default database for Rails development and was installed along with Rails in Chapter 1, <a href="../Text/f_0013.html#chp.installing">​<em>Installing Rails</em>​</a>. With SQLite 3 there are no steps required to create a database, and there are no special user accounts or passwords to deal with. So, now you get to experience one of the benefits of going with the flow (or, convention over configuration, as Rails folks say...ad nauseam).</p>

  <p id="N11D69">If it’s important to you to use a database server other than SQLite 3, the commands you’ll need to create the database and grant permissions will be different. You will find some helpful hints in the Getting Started Rails Guide.<a href="../Text/f_0045.html#FOOTNOTE-17" id="FNPTR-17">[17]</a></p>

  <h3 id="sec.generate.scaffold">Generating the Scaffold</h3>

  <p id="N11D76">Back in Figure 8, <a href="../Text/f_0041.html#fig.initial.data">​<em>Initial guess at application data</em>​</a>, we sketched out the basic content of the <code class="cf ic">products</code> table. Now let’s turn that into reality. We need to create a database table and a Rails <span class="emph">model</span> that lets our application use that table, a number of <span class="emph">views</span> to make up the user interface, and a <span class="emph">controller</span> to orchestrate the application.</p>

  <p id="N11D88">So, let’s go ahead and create the model, views, controller, and migration for our <code class="cf sqltable">products</code> table. With Rails, you can do all that with one command by asking Rails to generate what is known as a <span class="emph">scaffold</span> for a given model. Note that on the command line<a href="../Text/f_0045.html#FOOTNOTE-18" id="FNPTR-18">[18]</a> that follows, we use the singular form, <code class="cf sqltable">Product</code>. In Rails, a model is automatically mapped to a database table whose name is the plural form of the model’s class. In our case, we asked for a model called <code class="cf class">Product</code>, so Rails associated it with the table called <code class="cf sqltable">products</code>. (And how will it find that table? The <code class="cf ic">development</code> entry in <code class="cf filename">config/database.yml</code> tells Rails where to look for it. For SQLite 3 users, this will be a file in the <code class="cf dir">db</code> directory.)</p>

  <table class="processedcode">
    <tr>
      <td class="codeprefix">&nbsp;</td>

      <td class="codeline"><code class="sgc-1">depot&gt; <strong class="prompt">rails generate scaffold Product \</strong></code></td>
    </tr>

    <tr>
      <td class="codeprefix">&nbsp;</td>

      <td class="codeline"><code class="sgc-1"><strong class="prompt">title:string description:text image_url:string price:decimal</strong></code></td>
    </tr>

    <tr>
      <td class="codeprefix">&nbsp;</td>

      <td class="codeline"><code class="sgc-1">invoke active_record</code></td>
    </tr>

    <tr>
      <td class="codeprefix">&nbsp;</td>

      <td class="codeline"><code class="sgc-1">create db/migrate/20110711000001_create_products.rb</code></td>
    </tr>

    <tr>
      <td class="codeprefix">&nbsp;</td>

      <td class="codeline"><code class="sgc-1">create app/models/product.rb</code></td>
    </tr>

    <tr>
      <td class="codeprefix">&nbsp;</td>

      <td class="codeline"><code class="sgc-1">invoke test_unit</code></td>
    </tr>

    <tr>
      <td class="codeprefix">&nbsp;</td>

      <td class="codeline"><code class="sgc-1">create test/unit/product_test.rb</code></td>
    </tr>

    <tr>
      <td class="codeprefix">&nbsp;</td>

      <td class="codeline"><code class="sgc-1">create test/fixtures/products.yml</code></td>
    </tr>

    <tr>
      <td class="codeprefix">&nbsp;</td>

      <td class="codeline"><code class="sgc-1">route resources :products</code></td>
    </tr>

    <tr>
      <td class="codeprefix">&nbsp;</td>

      <td class="codeline"><code class="sgc-1">invoke scaffold_controller</code></td>
    </tr>

    <tr>
      <td class="codeprefix">&nbsp;</td>

      <td class="codeline"><code class="sgc-1">create app/controllers/products_controller.rb</code></td>
    </tr>

    <tr>
      <td class="codeprefix">&nbsp;</td>

      <td class="codeline"><code class="sgc-1">invoke erb</code></td>
    </tr>

    <tr>
      <td class="codeprefix">&nbsp;</td>

      <td class="codeline"><code class="sgc-1">create app/views/products</code></td>
    </tr>

    <tr>
      <td class="codeprefix">&nbsp;</td>

      <td class="codeline"><code class="sgc-1">create app/views/products/index.html.erb</code></td>
    </tr>

    <tr>
      <td class="codeprefix">&nbsp;</td>

      <td class="codeline"><code class="sgc-1">create app/views/products/edit.html.erb</code></td>
    </tr>

    <tr>
      <td class="codeprefix">&nbsp;</td>

      <td class="codeline"><code class="sgc-1">create app/views/products/show.html.erb</code></td>
    </tr>

    <tr>
      <td class="codeprefix">&nbsp;</td>

      <td class="codeline"><code class="sgc-1">create app/views/products/new.html.erb</code></td>
    </tr>

    <tr>
      <td class="codeprefix">&nbsp;</td>

      <td class="codeline"><code class="sgc-1">create app/views/products/_form.html.erb</code></td>
    </tr>

    <tr>
      <td class="codeprefix">&nbsp;</td>

      <td class="codeline"><code class="sgc-1">invoke test_unit</code></td>
    </tr>

    <tr>
      <td class="codeprefix">&nbsp;</td>

      <td class="codeline"><code class="sgc-1">create test/functional/products_controller_test.rb</code></td>
    </tr>

    <tr>
      <td class="codeprefix">&nbsp;</td>

      <td class="codeline"><code class="sgc-1">invoke helper</code></td>
    </tr>

    <tr>
      <td class="codeprefix">&nbsp;</td>

      <td class="codeline"><code class="sgc-1">create app/helpers/products_helper.rb</code></td>
    </tr>

    <tr>
      <td class="codeprefix">&nbsp;</td>

      <td class="codeline"><code class="sgc-1">invoke test_unit</code></td>
    </tr>

    <tr>
      <td class="codeprefix">&nbsp;</td>

      <td class="codeline"><code class="sgc-1">create test/unit/helpers/products_helper_test.rb</code></td>
    </tr>

    <tr>
      <td class="codeprefix">&nbsp;</td>

      <td class="codeline"><code class="sgc-1">create app/assets/stylesheets/scaffolds.css.scss</code></td>
    </tr>

    <tr>
      <td class="codeprefix">&nbsp;</td>

      <td class="codeline"><code class="sgc-1">invoke assets</code></td>
    </tr>

    <tr>
      <td class="codeprefix">&nbsp;</td>

      <td class="codeline"><code class="sgc-1">invoke coffee</code></td>
    </tr>

    <tr>
      <td class="codeprefix">&nbsp;</td>

      <td class="codeline"><code class="sgc-1">create app/assets/javascripts/products.js.coffee</code></td>
    </tr>

    <tr>
      <td class="codeprefix">&nbsp;</td>

      <td class="codeline"><code class="sgc-1">invoke scss</code></td>
    </tr>

    <tr>
      <td class="codeprefix">&nbsp;</td>

      <td class="codeline"><code class="sgc-1">create app/assets/stylesheets/products.css.scss</code></td>
    </tr>

    <tr>
      <td class="codeprefix">&nbsp;</td>

      <td class="codeline"><code class="sgc-1">invoke scss</code></td>
    </tr>

    <tr>
      <td class="codeprefix">&nbsp;</td>

      <td class="codeline"><code class="sgc-1">create app/assets/stylesheets/scaffolds.css.scss</code></td>
    </tr>
  </table>

  <p id="N11E60">The generator creates a bunch of files. The one we’re interested in first is the <span class="firstuseinline">migration</span> one, namely, <code class="cf filename">20110711000001_create_products.rb</code>.</p>

  <p id="N11E74">A migration represents a change we want to make to the data, expressed in a source file in database-independent terms. These changes can update both the database schema and the data in the database tables. We apply these migrations to update our database, and we can unapply them to roll our database back. We have a whole section on migrations starting <a href="../Text/f_0124.html#chp.migrations">​here​</a>. For now, we’ll just use them without too much more comment.</p>

  <p id="N11E86">The migration has a UTC-based timestamp prefix (20110711000001), a name (<code class="cf filename">create_products</code>), and a file extension (<code class="cf fileextension">rb</code>, because it’s a Ruby program).</p>

  <p id="N11E8F">The timestamp prefix you will see will be different. In fact, the timestamps used in this book are clearly fictitious. Typically your timestamps will not be consecutive; instead, they will reflect the time the migration was created.</p>

  <h3 id="sec.apply.migration">Applying the Migration</h3>

  <p id="N11E97">Although we have already told Rails about the basic data types of each property, let’s go ahead and refine the definition of the price to have eight digits of significance and two digits after the decimal point.</p>

  <table class="processedcode">
    <tr class="livecodelozenge">
      <td colspan="2"><a href="http://media.pragprog.com/titles/rails4/code/rails31/depot_a/db/migrate/20110711000001_create_products.rb">rails31/depot_a/db/migrate/20110711000001_create_products.rb</a></td>
    </tr>

    <tr>
      <td class="codeprefix">&nbsp;</td>

      <td class="codeline"><code class="sgc-1"><strong class="prompt">class</strong> CreateProducts &lt; ActiveRecord::Migration</code></td>
    </tr>

    <tr>
      <td class="codeprefix">&nbsp;</td>

      <td class="codeline"><code class="sgc-1"><strong class="prompt">def</strong> change</code></td>
    </tr>

    <tr>
      <td class="codeprefix">&nbsp;</td>

      <td class="codeline"><code class="sgc-1">create_table :products <strong class="prompt">do</strong> |t|</code></td>
    </tr>

    <tr>
      <td class="codeprefix">&nbsp;</td>

      <td class="codeline"><code class="sgc-1">t.string :title</code></td>
    </tr>

    <tr>
      <td class="codeprefix">&nbsp;</td>

      <td class="codeline"><code class="sgc-1">t.text :description</code></td>
    </tr>

    <tr>
      <td class="codeprefix">&nbsp;</td>

      <td class="codeline"><code class="sgc-1">t.string :image_url</code></td>
    </tr>

    <tr>
      <td class="codeprefix"><span class="codehighlightline">*</span> &nbsp;</td>

      <td class="codeline"><code class="sgc-1">t.decimal :price, precision: 8, scale: 2</code></td>
    </tr>

    <tr>
      <td class="codeprefix">&nbsp;</td>

      <td class="codeline"></td>
    </tr>

    <tr>
      <td class="codeprefix">&nbsp;</td>

      <td class="codeline"><code class="sgc-1">t.timestamps</code></td>
    </tr>

    <tr>
      <td class="codeprefix">&nbsp;</td>

      <td class="codeline"><code class="sgc-1"><strong class="prompt">end</strong></code></td>
    </tr>

    <tr>
      <td class="codeprefix">&nbsp;</td>

      <td class="codeline"><code class="sgc-1"><strong class="prompt">end</strong></code></td>
    </tr>

    <tr>
      <td class="codeprefix">&nbsp;</td>

      <td class="codeline"><code class="sgc-1"><strong class="prompt">end</strong></code></td>
    </tr>
  </table>

  <p id="N11ED3">Now that we are done with our changes, we need to get Rails to apply this migration to our development database. We do this using the <code class="cf commandname">rake</code> command. Rake is like having a reliable assistant on hand all the time: you tell it to do some task, and that task gets done. In this case, we’ll tell Rake to apply any unapplied migrations to our database:</p>

  <table class="processedcode">
    <tr>
      <td class="codeprefix">&nbsp;</td>

      <td class="codeline"><code class="sgc-1">depot&gt; <strong class="prompt">rake db:migrate</strong></code></td>
    </tr>

    <tr>
      <td class="codeprefix">&nbsp;</td>

      <td class="codeline"><code class="sgc-1">(in /Users/rubys/work/depot)</code></td>
    </tr>

    <tr>
      <td class="codeprefix">&nbsp;</td>

      <td class="codeline"><code class="sgc-1">== CreateProducts: migrating =================================================</code></td>
    </tr>

    <tr>
      <td class="codeprefix">&nbsp;</td>

      <td class="codeline"><code class="sgc-1">-- create_table(:products)</code></td>
    </tr>

    <tr>
      <td class="codeprefix">&nbsp;</td>

      <td class="codeline"><code class="sgc-1">-&gt; <strong class="prompt">0.0027s</strong></code></td>
    </tr>

    <tr>
      <td class="codeprefix">&nbsp;</td>

      <td class="codeline"><code class="sgc-1">== CreateProducts: migrated (0.0023s) ========================================</code></td>
    </tr>
  </table>

  <p id="N11F0A">And that’s it. Rake looks for all the migrations not yet applied to the database and applies them. In our case, the <code class="cf sqltable">products</code> table is added to the database defined by the <code class="cf ic">development</code> section of the <code class="cf filename">database.yml</code> file.</p>

  <p id="N11F29">OK, all the groundwork has been done. We set up our Depot application as a Rails project. We created the development database and configured our application to be able to connect to it. We created a products controller and a <code class="cf ic">Product</code> model and used a migration to create the corresponding <code class="cf sqltable">products</code> table. And a number of views have been created for us. It’s time to see all this in action.</p>

  <h3 id="heading_id_3">Seeing the List of Products</h3>

  <p id="N11F36">With three commands we have created an application and a database (or a table inside an existing database, if you chose something other than SQLite 3). Before we worry too much about just what happened behind the scenes here, let’s try our shiny new application.</p>

  <p id="N11F39">First, we’ll start a local server, supplied with Rails:</p>

  <table class="processedcode">
    <tr>
      <td class="codeprefix">&nbsp;</td>

      <td class="codeline"><code class="sgc-1">depot&gt; <strong class="prompt">rails server</strong></code></td>
    </tr>

    <tr>
      <td class="codeprefix">&nbsp;</td>

      <td class="codeline"><code class="sgc-1">=&gt; Booting WEBrick</code></td>
    </tr>

    <tr>
      <td class="codeprefix">&nbsp;</td>

      <td class="codeline"><code class="sgc-1">=&gt; Rails 3.1.0 application starting in development on http://0.0.0.0:3000</code></td>
    </tr>

    <tr>
      <td class="codeprefix">&nbsp;</td>

      <td class="codeline"><code class="sgc-1">=&gt; Call with -d to detach</code></td>
    </tr>

    <tr>
      <td class="codeprefix">&nbsp;</td>

      <td class="codeline"><code class="sgc-1">=&gt; Ctrl-C to shutdown server</code></td>
    </tr>

    <tr>
      <td class="codeprefix">&nbsp;</td>

      <td class="codeline"><code class="sgc-1">[2011-07-11 17:45:38] INFO WEBrick 1.3.1</code></td>
    </tr>

    <tr>
      <td class="codeprefix">&nbsp;</td>

      <td class="codeline"><code class="sgc-1">[2011-07-11 17:45:38] INFO ruby 1.9.2 (2011-02-18) [x86_64-linux]</code></td>
    </tr>

    <tr>
      <td class="codeprefix">&nbsp;</td>

      <td class="codeline"><code class="sgc-1">[2011-07-11 17:45:43] INFO WEBrick::HTTPServer#start: pid=24649 port=3000</code></td>
    </tr>
  </table>

  <p id="N11F65">Just as it did with our demo application in <a href="../Text/f_0021.html#chp.gratification"></a>, this command starts a web server on our local host, port 3000. If you get an error saying <code class="cf ic">Address already in use</code> when you try to run the server, that simply means you already have a Rails server running on your machine. If you’ve been following along with the examples in the book, that might well be the “Hello, World!” application from Chapter 4. Find its console, and kill the server using Ctrl-C. If you are running on Windows, you may see the prompt <code class="cf ic">Terminate batch job (Y/N)?</code>. If so, respond with <code class="cf ic">y</code>.</p>

  <p id="N11F74">Let’s connect to it. Remember, the URL we give to our browser contains both the port number (3000) and the name of the controller in lowercase (products).</p>

  <div xmlns:str="http://exslt.org/strings"><img alt="images/depot_a_admin.png" src="../Images/depot_a_admin.png" /></div>

  <p id="N11F7A">That’s pretty boring. It’s showing us an empty list of products. Let’s add some. Click the New product link, and a form should appear.</p>

  <div xmlns:str="http://exslt.org/strings"><img alt="images/depot_a_big_desc.png" src="../Images/depot_a_big_desc.png" /></div>

  <p id="N11F80">These forms are simply HTML templates, just like the ones you created in Section 2.2, <a href="../Text/f_0023.html#sec.hello.rails">​<em>Hello, Rails!</em>​</a>. In fact, we can modify them. Let’s change the number of lines in the description field:</p>

  <table class="processedcode">
    <tr class="livecodelozenge">
      <td colspan="2"><a href="http://media.pragprog.com/titles/rails4/code/rails31/depot_a/app/views/products/_form.html.erb">rails31/depot_a/app/views/products/_form.html.erb</a></td>
    </tr>

    <tr>
      <td class="codeprefix">&nbsp;</td>

      <td class="codeline"><code class="sgc-1">&lt;%= form_for(@product) <strong class="prompt">do</strong> |f| %&gt;</code></td>
    </tr>

    <tr>
      <td class="codeprefix">&nbsp;</td>

      <td class="codeline"><code class="sgc-1">&lt;% <strong class="prompt">if</strong> @product.errors.any? %&gt;</code></td>
    </tr>

    <tr>
      <td class="codeprefix">&nbsp;</td>

      <td class="codeline"><code class="sgc-1"><strong class="prompt">&lt;div</strong> id=<em class="string">"error_explanation"</em> <strong class="prompt">&gt;</strong></code></td>
    </tr>

    <tr>
      <td class="codeprefix">&nbsp;</td>

      <td class="codeline"><code class="sgc-1"><strong class="prompt">&lt;h2&gt;</strong>&lt;%= pluralize(@product.errors.count, <em class="string">"error"</em>) %&gt;</code></td>
    </tr>

    <tr>
      <td class="codeprefix">&nbsp;</td>

      <td class="codeline"><code class="sgc-1">prohibited this product from being saved:<strong class="prompt">&lt;/h2&gt;</strong></code></td>
    </tr>

    <tr>
      <td class="codeprefix">&nbsp;</td>

      <td class="codeline"></td>
    </tr>

    <tr>
      <td class="codeprefix">&nbsp;</td>

      <td class="codeline"><code class="sgc-1"><strong class="prompt">&lt;ul&gt;</strong></code></td>
    </tr>

    <tr>
      <td class="codeprefix">&nbsp;</td>

      <td class="codeline"><code class="sgc-1">&lt;% @product.errors.full_messages.each <strong class="prompt">do</strong> |msg| %&gt;</code></td>
    </tr>

    <tr>
      <td class="codeprefix">&nbsp;</td>

      <td class="codeline"><code class="sgc-1"><strong class="prompt">&lt;li&gt;</strong>&lt;%= msg %&gt;<strong class="prompt">&lt;/li&gt;</strong></code></td>
    </tr>

    <tr>
      <td class="codeprefix">&nbsp;</td>

      <td class="codeline"><code class="sgc-1">&lt;% <strong class="prompt">end</strong> %&gt;</code></td>
    </tr>

    <tr>
      <td class="codeprefix">&nbsp;</td>

      <td class="codeline"><code class="sgc-1"><strong class="prompt">&lt;/ul&gt;</strong></code></td>
    </tr>

    <tr>
      <td class="codeprefix">&nbsp;</td>

      <td class="codeline"><code class="sgc-1"><strong class="prompt">&lt;/div&gt;</strong></code></td>
    </tr>

    <tr>
      <td class="codeprefix">&nbsp;</td>

      <td class="codeline"><code class="sgc-1">&lt;% <strong class="prompt">end</strong> %&gt;</code></td>
    </tr>

    <tr>
      <td class="codeprefix">&nbsp;</td>

      <td class="codeline"></td>
    </tr>

    <tr>
      <td class="codeprefix">&nbsp;</td>

      <td class="codeline"><code class="sgc-1"><strong class="prompt">&lt;div</strong> class=<em class="string">"field"</em> <strong class="prompt">&gt;</strong></code></td>
    </tr>

    <tr>
      <td class="codeprefix">&nbsp;</td>

      <td class="codeline"><code class="sgc-1">&lt;%= f.label :title %&gt;<strong class="prompt">&lt;br</strong> <strong class="prompt">/&gt;</strong></code></td>
    </tr>

    <tr>
      <td class="codeprefix">&nbsp;</td>

      <td class="codeline"><code class="sgc-1">&lt;%= f.text_field :title %&gt;</code></td>
    </tr>

    <tr>
      <td class="codeprefix">&nbsp;</td>

      <td class="codeline"><code class="sgc-1"><strong class="prompt">&lt;/div&gt;</strong></code></td>
    </tr>

    <tr>
      <td class="codeprefix">&nbsp;</td>

      <td class="codeline"><code class="sgc-1"><strong class="prompt">&lt;div</strong> class=<em class="string">"field"</em> <strong class="prompt">&gt;</strong></code></td>
    </tr>

    <tr>
      <td class="codeprefix">&nbsp;</td>

      <td class="codeline"><code class="sgc-1">&lt;%= f.label :description %&gt;<strong class="prompt">&lt;br</strong> <strong class="prompt">/&gt;</strong></code></td>
    </tr>

    <tr>
      <td class="codeprefix"><span class="codehighlightline">*</span> &nbsp;</td>

      <td class="codeline"><code class="sgc-1">&lt;%= f.text_area :description, rows: 6 %&gt;</code></td>
    </tr>

    <tr>
      <td class="codeprefix">&nbsp;</td>

      <td class="codeline"><code class="sgc-1"><strong class="prompt">&lt;/div&gt;</strong></code></td>
    </tr>

    <tr>
      <td class="codeprefix">&nbsp;</td>

      <td class="codeline"><code class="sgc-1"><strong class="prompt">&lt;div</strong> class=<em class="string">"field"</em> <strong class="prompt">&gt;</strong></code></td>
    </tr>

    <tr>
      <td class="codeprefix">&nbsp;</td>

      <td class="codeline"><code class="sgc-1">&lt;%= f.label :image_url %&gt;<strong class="prompt">&lt;br</strong> <strong class="prompt">/&gt;</strong></code></td>
    </tr>

    <tr>
      <td class="codeprefix">&nbsp;</td>

      <td class="codeline"><code class="sgc-1">&lt;%= f.text_field :image_url %&gt;</code></td>
    </tr>

    <tr>
      <td class="codeprefix">&nbsp;</td>

      <td class="codeline"><code class="sgc-1"><strong class="prompt">&lt;/div&gt;</strong></code></td>
    </tr>

    <tr>
      <td class="codeprefix">&nbsp;</td>

      <td class="codeline"><code class="sgc-1"><strong class="prompt">&lt;div</strong> class=<em class="string">"field"</em> <strong class="prompt">&gt;</strong></code></td>
    </tr>

    <tr>
      <td class="codeprefix">&nbsp;</td>

      <td class="codeline"><code class="sgc-1">&lt;%= f.label :price %&gt;<strong class="prompt">&lt;br</strong> <strong class="prompt">/&gt;</strong></code></td>
    </tr>

    <tr>
      <td class="codeprefix">&nbsp;</td>

      <td class="codeline"><code class="sgc-1">&lt;%= f.text_field :price %&gt;</code></td>
    </tr>

    <tr>
      <td class="codeprefix">&nbsp;</td>

      <td class="codeline"><code class="sgc-1"><strong class="prompt">&lt;/div&gt;</strong></code></td>
    </tr>

    <tr>
      <td class="codeprefix">&nbsp;</td>

      <td class="codeline"><code class="sgc-1"><strong class="prompt">&lt;div</strong> class=<em class="string">"actions"</em> <strong class="prompt">&gt;</strong></code></td>
    </tr>

    <tr>
      <td class="codeprefix">&nbsp;</td>

      <td class="codeline"><code class="sgc-1">&lt;%= f.submit %&gt;</code></td>
    </tr>

    <tr>
      <td class="codeprefix">&nbsp;</td>

      <td class="codeline"><code class="sgc-1"><strong class="prompt">&lt;/div&gt;</strong></code></td>
    </tr>

    <tr>
      <td class="codeprefix">&nbsp;</td>

      <td class="codeline"><code class="sgc-1">&lt;% <strong class="prompt">end</strong> %&gt;</code></td>
    </tr>
  </table>

  <p id="N1206D">We will explore this more in Chapter 8, <a href="../Text/f_0050.html#chp.catalog.display">​<em>Task C: Catalog Display</em>​</a>. But for now, we’ve adjusted one field to taste, so let’s go ahead and fill it in:</p>

  <div xmlns:str="http://exslt.org/strings"><img alt="images/depot_a_new.png" src="../Images/depot_a_new.png" /></div>

  <p id="N12083">Click the Create button, and you should see the new product was successfully created. If you now click the Back link, you should see the new product in the list:</p>

  <div xmlns:str="http://exslt.org/strings"><img alt="images/depot_a_list.png" src="../Images/depot_a_list.png" /></div>

  <p id="N12089">Perhaps it isn’t the prettiest interface, but it works, and we can show it to our client for approval. She can play with the other links (showing details, editing existing products, and so on). We explain to her that this is only a first step&mdash;we know it’s rough, but we wanted to get her feedback early. (And four commands probably count as early in anyone’s book.)</p>

  <p id="N1208C">At this point, you’ve accomplished a lot with only four commands. Before we move on, let’s try one more command:</p>

  <table class="processedcode">
    <tr>
      <td class="codeprefix">&nbsp;</td>

      <td class="codeline"><code class="sgc-1">rake test</code></td>
    </tr>
  </table>

  <p id="N120A5">Included in the output should be two lines that each say <code class="cf ic">0 failures, 0 errors</code>. This is for the unit and functional, tests that Rails generates along with the scaffolding. They are minimal at this point, but simply knowing that they are there and that they pass should give you confidence. As you proceed through these chapters in Part II, you are encouraged to run this command frequently because it will help you spot and track down errors. We will cover this more in Section 7.2, <a href="../Text/f_0048.html#sec.unit.test">​<em>Iteration B2: Unit Testing of Models</em>​</a>.</p>

  <p id="N120B9">Note that if you’ve used a database other than SQLite3, this step may have failed. Check your <code class="cf filename">database.yml</code> file, and see the notes <a href="../Text/f_0132.html#sec.connecting">​here​</a>.</p><script src="../Misc/book_local.js" type="text/javascript">
</script>
</body>
</html>
