<?xml version="1.0" encoding="utf-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN"
  "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <title>Agile Web Development with Rails</title>
  <link href="../Styles/bookshelf.css" rel="stylesheet" type="text/css" />
  <link href="../Styles/book_local.css" rel="stylesheet" type="text/css" />
  <link href="../Styles/page-template.xpgt" rel="stylesheet" type="application/vnd.adobe-page-template+xml" />
  <meta content="rails4" name="bookcode" />
</head>

<body>
  <h2 id="heading_id_2">3.3 Action Pack: The View and Controller</h2>

  <p id="N10FF6">When you think about it, the view and controller parts of MVC are pretty intimate. The controller supplies data to the view, and the controller receives events from the pages generated by the views. Because of these interactions, support for views and controllers in Rails is bundled into a single component, <span class="emph">Action Pack</span>.</p>

  <p id="N11007">Don’t be fooled into thinking that your application’s view code and controller code will be jumbled up just because Action Pack is a single component. Quite the contrary; Rails gives you the separation you need to write web applications with clearly demarcated code for control and presentation logic.</p>

  <h3 id="heading_id_3">View Support</h3>

  <p id="N1100E">In Rails, the view is responsible for creating either all or part of a response to be displayed in a browser, processed by an application or sent as an email. At its simplest, a view is a chunk of HTML code that displays some fixed text. More typically you’ll want to include dynamic content created by the action method in the controller.</p>

  <p id="N11011">In Rails, dynamic content is generated by templates, which come in three flavors. The most common templating scheme, called Embedded Ruby (ERb), embeds snippets of Ruby code within a view document, in many ways similar to the way it is done in other web frameworks, such as PHP or JSP. Although this approach is very flexible, some are concerned that it violates the spirit of MVC. By embedding code in the view, we risk adding logic that should be in the model or the controller. As with everything, while judicious use in moderation is healthy, overuse can become a problem. Maintaining a clean separation of concerns is part of the job of the developer. (We look at HTML templates in Section 25.2, <a href="../Text/f_0137.html#sec.rhtml">​<em>Generating HTML with ERb</em>​</a>.)</p>

  <p id="N11020">You can also use ERb to construct JavaScript fragments on the server that are then executed on the browser. This is great for creating dynamic Ajax interfaces. We talk about these starting <a href="../Text/f_0067.html#sec.ajax.cart">​here​</a>.</p>

  <p id="N1102D">Rails also provides XML Builder to construct XML documents using Ruby code&mdash;the structure of the generated XML will automatically follow the structure of the code. We discuss <code class="cf filename">xml.builder</code> templates starting <a href="../Text/f_0136.html#sec.builder">​here​</a>.</p>

  <h3 id="heading_id_4">And the Controller!</h3>

  <p id="N1103A">The Rails controller is the logical center of your application. It coordinates the interaction between the user, the views, and the model. However, Rails handles most of this interaction behind the scenes; the code you write concentrates on application-level functionality. This makes Rails controller code remarkably easy to develop and maintain.</p>

  <p id="N11044">The controller is also home to a number of important ancillary services:</p>

  <ul>
    <li>
      <p id="N1104A">It is responsible for routing external requests to internal actions. It handles people-friendly URLs extremely well.</p>
    </li>

    <li>
      <p id="N1104E">It manages caching, which can give applications orders-of-magnitude performance boosts.</p>
    </li>

    <li>
      <p id="N11052">It manages helper modules, which extend the capabilities of the view templates without bulking up their code.</p>
    </li>

    <li>
      <p id="N11056">It manages sessions, giving users the impression of ongoing interaction with our applications.</p>
    </li>
  </ul>

  <p id="N11059">We’ve already seen and modified a controller in Section 2.2, <a href="../Text/f_0023.html#sec.hello.rails">​<em>Hello, Rails!</em>​</a>, and will be seeing and modifying a number of controllers in the development of a sample application, starting with the products controller in Section 8.1, <a href="../Text/f_0051.html#sec.create.catalog.listing">​<em>Iteration C1: Creating the Catalog Listing</em>​</a>.</p>

  <p id="N11068">There’s a lot to Rails. But before going any further, let’s have a brief refresher&mdash;and for some of you, a brief introduction&mdash;to the Ruby language.</p>

  <div class="footnotes">
    <h4 id="heading_id_5">Footnotes</h4>

    <table cellspacing="3">
      <tr valign="top">
        <td class="footnote-number"><a href="../Text/f_0028.html#FNPTR-15" id="FOOTNOTE-15">[15]</a></td>

        <td>
          <p id="N10EF6">SQL, referred to by some as <span class="emph">Structured Query Language</span>, is the language used to query and update relational databases.</p>
        </td>
      </tr>
    </table>
  </div>

  <div class="copyright">
    Copyright © 2011, The Pragmatic Bookshelf.
  </div><script src="../Misc/book_local.js" type="text/javascript">
</script>
</body>
</html>
