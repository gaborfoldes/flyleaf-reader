<?xml version="1.0" encoding="utf-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN"
  "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <title>Agile Web Development with Rails</title>
  <link href="../Styles/bookshelf.css" rel="stylesheet" type="text/css" />
  <link href="../Styles/book_local.css" rel="stylesheet" type="text/css" />
  <link href="../Styles/page-template.xpgt" rel="stylesheet" type="application/vnd.adobe-page-template+xml" />
  <meta content="rails4" name="bookcode" />
</head>

<body>
  <h2 id="wtf.marshal">4.5 Marshaling Objects</h2>

  <p id="N11970">Ruby can take an object and convert it into a stream of bytes that can be stored outside the application. This process is called <span class="firstuseinline">marshaling</span>. This saved object can later be read by another instance of the application (or by a totally separate application), and a copy of the originally saved object can be reconstituted.</p>

  <p id="N11985">There are two potential issues when you use marshaling. First, some objects cannot be dumped. If the objects to be dumped include bindings, procedure or method objects, instances of class <code class="cf class">IO</code>, or singleton objects, or if you try to dump anonymous classes or modules, a <code class="cf class">TypeError</code> will be raised.</p>

  <p id="N1198E">Second, when you load a marshaled object, Ruby needs to know the definition of the class of that object (and of all the objects it contains).</p>

  <p id="N11991">Rails uses marshaling to store session data. If you rely on Rails to dynamically load classes, it is possible that a particular class may not have been defined at the point it reconstitutes session data. For that reason, you’ll use the <code class="cf ic">model</code> declaration in your controller to list all models that are marshaled. This preemptively loads the necessary classes to make marshaling work.</p>

  <p id="N119A9">Now that you have the Ruby basics down, let’s give what we learned a whirl with a slightly larger, annotated example that pulls together a number of concepts. We’ll follow that with a walk-through of special features that will help you with your Rails coding.</p><script src="../Misc/book_local.js" type="text/javascript">
</script>
</body>
</html>
